#!/usr/bin/env bash

SCRIPT_DIR=$( cd -- "$( dirname -- "${BASH_SOURCE[0]}" )" &> /dev/null && pwd )

if [[ -f ${SCRIPT_DIR}/.pid && $(ps -p $(cat ${SCRIPT_DIR}/.pid) -o comm=) = emacs ]]; then
    kill $(cat ${SCRIPT_DIR}/.pid)
    rm ${SCRIPT_DIR}/.pid
fi

emacs --fg-daemon=default &
echo $! > ${SCRIPT_DIR}/.pid
